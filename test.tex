%arara: xelatex
\documentclass{ctexart}
\usepackage{amsmath,amssymb,amsthm,bbm}
\newtheorem{definition}{Definition}
\newtheorem{theorem}{Theorem}
\everymath{\displaystyle}
\newlength\inlineHeight
\newlength\inlineWidth
\long\def\(#1\){%
  \settoheight{\inlineHeight}{$#1$}
  \settowidth{\inlineWidth}{$#1$}
  \ifdim \inlineWidth > 0.5\textwidth
  $$#1$$
  \else
  \ifdim \inlineHeight > 1.5em
  $$#1$$
  \else
  $#1$
  \fi
  \fi
}
\begin{document}
\chapter{test}
\chapter{aaa}
\section{aaa}
\begin{enumerate}
  \item
  \item
  \item
    \begin{enumerate}
      \item
        \begin{enumerate}
          \item
            \begin{enumerate}
              \item
              \item
            \end{enumerate}
        \end{enumerate}
    \end{enumerate}
\end{enumerate}
\(\frac{1}{2}\)
\end{document}


